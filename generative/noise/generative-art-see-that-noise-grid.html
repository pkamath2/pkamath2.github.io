<html>
    <!--Inspired by Matt Pearson's Generative Art using Processing. That is one amazing book.-->
    <head>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://unpkg.com/perlin-noise@0.0.1/index.js"></script>
        <style>
            body{
                font-family: 'American Typewriter', sans-serif
            }
            #n-heading{
                text-align: center;
            }
            #n-content{
                text-align: center;
            }
            svg {
                background-color: floralwhite;
                align-items: center
            }
        </style>
    </head>
    <body>
        <div id="n-heading"><h1>Perlin Noise</h1></div>
        <div id="n-content">
            <svg id="svg" width="700" height="1000"></svg>
        </div>
        <script>
            var svg = d3.select("svg");
            var width = +svg.attr("width");
            var height = +svg.attr("height");

            var xstart = Math.random()*10;
            var xnoise = xstart;
            var ynoise = Math.random()*10;

            var strokecolor = Number(parseInt(0,10)).toString(16);
            strokecolor = "#"+strokecolor+strokecolor+strokecolor;

            var perlinNoiseArr = generatePerlinNoise(width, height,{octaveCount:6,amplitude:0.03,persistence:0.02});
            for(var y=0;y<height;y+=5){
                for(var x=0;x<width;x+=5){
                    var dimension = generateNoise3(x,y);
                    console.log(dimension)
                    var fill = dimension>0.5?'#ffd1d8':'none';
                    svg.append("rect").attr("x",x)
                                        .attr("y",y)
                                        .attr("width",dimension*7)
                                        .attr("height",dimension*7)
                                        .attr("fill",fill)
                                        .attr("stroke",strokecolor)
                                        .attr('stroke-width', 0.2);
                }
            }
            
            function generateNoise2(x,y){
                var noise = Math.pow(Math.sin((x+y)/2),3)
                return Math.abs(noise);
            } 

            function generateNoise3(x, y){
                return perlinNoiseArr[Math.floor((y*width)+x)];
            }            
        </script>
    </body>
</html>